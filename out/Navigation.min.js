"use strict";function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _createForOfIteratorHelper(a,b){var c;if("undefined"==typeof Symbol||null==a[Symbol.iterator]){if(Array.isArray(a)||(c=_unsupportedIterableToArray(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function n(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function e(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function s(){c=a[Symbol.iterator]()},n:function n(){var a=c.next();return g=a.done,a},e:function e(a){h=!0,f=a},f:function f(){try{g||null==c["return"]||c["return"]()}finally{if(h)throw f}}}}function _toConsumableArray(a){return _arrayWithoutHoles(a)||_iterableToArray(a)||_unsupportedIterableToArray(a)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _iterableToArray(a){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(a))return Array.from(a)}function _arrayWithoutHoles(a){if(Array.isArray(a))return _arrayLikeToArray(a)}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function ownKeys(a,b){var c=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);b&&(d=d.filter(function(b){return Object.getOwnPropertyDescriptor(a,b).enumerable})),c.push.apply(c,d)}return c}function _objectSpread(a){for(var b,c=1;c<arguments.length;c++)b=null==arguments[c]?{}:arguments[c],c%2?ownKeys(Object(b),!0).forEach(function(c){_defineProperty(a,c,b[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(b)):ownKeys(Object(b)).forEach(function(c){Object.defineProperty(a,c,Object.getOwnPropertyDescriptor(b,c))});return a}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _createSuper(a){var b=_isNativeReflectConstruct();return function(){var c,d=_getPrototypeOf(a);if(b){var e=_getPrototypeOf(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return _possibleConstructorReturn(this,c)}}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}(function(){var a=Math.min,b=Math.max,c=/*#__PURE__*/function(){function c(){_classCallCheck(this,c),_defineProperty(this,"isMouseDown",null),_defineProperty(this,"startMouseX",void 0),_defineProperty(this,"startScrollX",void 0),this.mountDraggble=this.mountDraggble.bind(this),this.unmountDraggble=this.unmountDraggble.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.disableAnchorsClick=this.disableAnchorsClick.bind(this)}return _createClass(c,[{key:"mountDraggble",value:function mountDraggble(){this.nav.addEventListener("mousedown",this.handleMouseDown),this.nav.addEventListener("mouseleave",this.handleMouseLeave),document.addEventListener("mouseup",this.handleMouseUp),document.addEventListener("mousemove",this.handleMouseMove)}},{key:"unmountDraggble",value:function unmountDraggble(){this.nav.removeEventListener("mousedown",this.handleMouseDown),this.nav.removeEventListener("mouseleave",this.handleMouseLeave),document.removeEventListener("mouseup",this.handleMouseUp),document.removeEventListener("mousemove",this.handleMouseMove)}},{key:"handleMouseDown",value:function handleMouseDown(a){this.isMouseDown=!0,this.anchors.map(function(a){a.style.transition=""});var b=this.anchors[0],c=b.style.transform;c&&(c=c.replace("translateX(0px)","0"),c=c.replace("translateX(-0px)","0"),c=c.replace("translateX(-",""),c=c.replace("px)","")),this.startScrollX=+c||0,this.startMouseX=a.pageX}},{key:"handleMouseUp",value:function handleMouseUp(){this.isMouseDown=!1,this.nav.classList.remove(this.props.dragActiveClass),this.disableAnchorsClick(!0)}},{key:"handleMouseMove",value:function handleMouseMove(c){if(this.isMouseDown){var d=this.props,e=d.dragSpeed,f=d.dragActiveClass,g=this.startMouseX-c.pageX;(50<g||50>g)&&(this.nav.classList.add(f),this.disableAnchorsClick());var h=g+this.startScrollX;h*=e,h=b(h,0),h=a(h,this.navScrollWidth-this.nav.clientWidth),this.anchors.map(function(a){a.style.transform="translateX(-".concat(h,"px)")})}}},{key:"disableAnchorsClick",value:function disableAnchorsClick(){var a=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];this.anchors.forEach(function(b){return a?void(b.style.pointerEvents="all"):void(b.style.pointerEvents="none")})}}]),c}(),d=/*#__PURE__*/function(c){function d(a){var b;return _classCallCheck(this,d),b=e.call(this,a),b.onLeft=b.onLeft.bind(_assertThisInitialized(b)),b.onRight=b.onRight.bind(_assertThisInitialized(b)),b.move=b.move.bind(_assertThisInitialized(b)),b.getAnchorsWithSection=b.getAnchorsWithSection.bind(_assertThisInitialized(b)),b}_inherits(d,c);var e=_createSuper(d);return _createClass(d,[{key:"onLeft",value:function onLeft(){var a=this.getAnchorsWithSection();this.move(a.indexOf(this.selectedAnchor)-1)}},{key:"onRight",value:function onRight(){var a=this.getAnchorsWithSection();this.move(a.indexOf(this.selectedAnchor)+1)}},{key:"getAnchorsWithSection",value:function getAnchorsWithSection(){return this.anchors.filter(function(a){return!!a.dataset.section})}},{key:"move",value:function move(c){c=b(c,0),c=a(c,this.anchors.length-1);var d=this.getAnchorsWithSection();this.changeAnchor(d[c],!0,!0)}},{key:"mountControl",value:function mountControl(){var a=this.props,b=a.leftArrowSelector,c=a.rightArrowSelector;document.querySelector(b).addEventListener("click",this.onLeft),document.querySelector(c).addEventListener("click",this.onRight)}},{key:"unmountControl",value:function unmountControl(){var a=this.props,b=a.leftArrowSelector,c=a.rightArrowSelector;document.querySelector(b).removeEventListener("click",this.onLeft),document.querySelector(c).removeEventListener("click",this.onRight)}}]),d}(c),e=/*#__PURE__*/function(c){function d(a){var b;_classCallCheck(this,d),b=e.call(this,a),_defineProperty(_assertThisInitialized(b),"props",{selector:".fancy-nav",anchorSelector:".fancy-nav-anchor",selectedAnchorClass:"fancy-nav-selected",anchorAnimationEasing:"ease",anchorAnimationDuration:"0.3s",dragActiveClass:"fancy-nav-drag-active",dragSpeed:1,leftArrowSelector:".fancy-nav-left",rightArrowSelector:".fancy-nav-right",scrollToSection:function scrollToSection(a){return a.scrollIntoView?void a.scrollIntoView({behavior:"smooth",block:"start"}):void(document.documentElement.scrollTop=a.offsetTop)},onAnchorChange:function onAnchorChange(){},onMount:function onMount(){},onSectionReached:function onSectionReached(){}}),_defineProperty(_assertThisInitialized(b),"mounted",!1),_defineProperty(_assertThisInitialized(b),"anchors",null),_defineProperty(_assertThisInitialized(b),"nav",null),_defineProperty(_assertThisInitialized(b),"navScrollWidth",0),_defineProperty(_assertThisInitialized(b),"initial",!0),_defineProperty(_assertThisInitialized(b),"selectedAnchor",null),_defineProperty(_assertThisInitialized(b),"currentSection",null),_defineProperty(_assertThisInitialized(b),"disableScrollHandler",!1),b.props=_objectSpread(_objectSpread({},b.props),a);var c=b.props,f=c.anchorSelector,g=c.selector,h=document.querySelectorAll("".concat(g," ").concat(f));return b.anchors=h.length&&_toConsumableArray(h),b.nav=document.querySelector(g),setTimeout(function(){b.navScrollWidth=b.nav.scrollWidth},0),b.mount=b.mount.bind(_assertThisInitialized(b)),b.unmount=b.unmount.bind(_assertThisInitialized(b)),b.changeAnchor=b.changeAnchor.bind(_assertThisInitialized(b)),b.handleScroll=b.handleScroll.bind(_assertThisInitialized(b)),b}_inherits(d,c);var e=_createSuper(d);return _createClass(d,[{key:"mount",value:function mount(){var a=this,b=this.props,c=b.withControl,d=b.withDraggable;return this.mounted=!0,this.anchors?void(c&&this.mountControl(),d&&this.mountDraggble(),this.anchors.map(function(b){b.addEventListener("click",function(){return a.changeAnchor(b,!0,!0)})}),window.addEventListener("scroll",this.handleScroll),this.props.onMount(this)):void console.error("Navigation anchors not found")}},{key:"unmount",value:function unmount(){var a=this.props,b=a.withControl,c=a.withDraggable;window.removeEventListener("scroll",this.handleScroll),b&&this.unmountControl(),c&&this.unmountDraggble(),this.mounted=!1}},{key:"changeAnchor",value:function changeAnchor(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!this.initial,e=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];if(c&&this.mounted){var f=this.props,g=f.selectedAnchorClass,h=f.anchorAnimationEasing,i=f.anchorAnimationDuration,j=f.onAnchorChange,k=c.offsetLeft+c.offsetWidth/2-this.nav.offsetWidth/2;if(k=b(k,0),k=a(k,this.navScrollWidth-this.nav.offsetWidth),this.anchors.map(function(a){a.classList.remove(g),a.style.transition=d?"transform ".concat(i," ").concat(h):"",a.style.transform="translateX(-".concat(k,"px)")}),c.classList.add(g),this.initial=!1,this.selectedAnchor!==c&&j(c,this),this.selectedAnchor=c,e){var l=document.querySelector(c.dataset.section);this.scrollToSection(l)}}}},{key:"handleScroll",value:function handleScroll(){if(!this.disableScrollHandler){var a,b=this.getAnchorsWithSection(),c=_createForOfIteratorHelper(b);try{for(c.s();!(a=c.n()).done;){var d=a.value,e=this.detectIfSectionIsInViewport(d);if(e){this.changeAnchor(d);break}}}catch(a){c.e(a)}finally{c.f()}}}},{key:"scrollToSection",value:function(a){var b=this;if(a){var c=this.props,d=c.scrollToSection,e=c.onSectionReached;this.disableScrollHandler=!0;var f,g=function(){clearTimeout(f),f=setTimeout(function(){b.currentSection!==a&&(e(a,b),b.currentSection=a),b.disableScrollHandler=!1,window.removeEventListener("scroll",g)},100)};window.addEventListener("scroll",g),d(a)}}},{key:"detectIfSectionIsInViewport",value:function detectIfSectionIsInViewport(a){var b=document.documentElement.clientHeight,c=document.documentElement.scrollTop,d=document.querySelector(a.dataset.section);if(!d)return console.error("Section not found");var e=d.offsetTop,f=e+d.offsetHeight,g=c+b/5>e&&c+b/3<f;return g&&this.currentSection!==d&&this.props.onSectionReached(d,this),g&&(this.currentSection=d),g}}]),d}(d);window.Navigation=e})();
